<nav class="navbar">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">
        <img src="https://cdn.discordapp.com/attachments/877247271840907325/886379692301619230/vox.png" alt="Vox Tecnologia logo" width="60" height="60" class="d-inline-block align-text top">
        <b>Solicitar Abertura de empresa</b>
      </a>
    </div>
</nav>

<div *ngIf="loading" class="d-flex justify-content-center">
  <div class="spinner-border mt-5" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>

<form [hidden]="loading" (ngSubmit)="onSubmit()" [formGroup]="form" #formDir="ngForm" class="row grid">

  <div class="col-md-auto" style="width: 30rem;">
    <p class="form-title">
      Dados do solicitante
    </p>
    
    <div class="mb-3">
      <label class="form-label">Responsável pela empresa*</label>
      <input formControlName="responsavel" type="text" class="form-control">
      <div *ngIf="responsavel!.invalid && formDir.submitted" class="validation-error">
        Campo obrigatório.
      </div>
      <div *ngIf="responsavel!.errors?.pattern" class="validation-error">
        Valor inválido. Apenas letras e espaços são aceitos nesse campo.
      </div>
    </div>


    <div class="mb-3">
      <label class="form-label">CPF*</label>
      <input formControlName="cpf" type="text" class="form-control">
      <div *ngIf="cpf!.invalid && formDir.submitted" class="validation-error">
        Campo obrigatório.
      </div>
      <div *ngIf="cpf!.errors?.pattern" class="validation-error">
        Valor inválido. Apenas números, pontos e hífen são aceitos nesse campo.
      </div>
    </div>

    <div class="mb-5">
      <label class="form-label">Data nascimento*</label>
      <input formControlName="dataNascimento" type="date" class="form-control">
      <div *ngIf="dataNascimento!.invalid && formDir.submitted" class="validation-error">
        Campo obrigatório.
      </div>
    </div>




    <p class="form-title">
      Dados da Empresa
    </p>
    
    <div class="mb-3">
      <label class="form-label">Nome fantasia*</label>
      <input formControlName="nomeFantasia" type="text" class="form-control">
      <div *ngIf="nomeFantasia!.invalid && formDir.submitted" class="validation-error">
        Campo obrigatório.
      </div>
    </div>


    <div class="mb-2">
      
      <label class="form-label">Escolha sua entidade de registro*</label>


      <div *ngFor="let entidade of entidadesNome" class="form-check">
        
        <input class="form-check-input" formControlName="entidadeNome"
        id="entidade" type="radio" [value]="entidade" name="entidadeNome">
        
        <label class="form-check-label" for="options">
          {{entidade}}
        </label>
      </div>
      <div *ngIf="entidadeNome!.invalid && formDir.submitted" class="validation-error">
        Campo obrigatório.
      </div>
    
    </div>

    <div class="mb-3">
      <label class="form-label">Natureza Jurídica*</label>
      <select formControlName="naturezaNome" class="form-select" style="font-size: 13px;">
        <option selected></option>
        <option *ngFor="let natureza of naturezasNome">{{natureza}}</option>
      </select>
      <div *ngIf="naturezaNome!.invalid && formDir.submitted" class="validation-error">
        Campo obrigatório.
      </div>
    </div>

  </div>

  <div class="info col-md-auto" style="width: 25rem;">
    <div class="info-content">
      <p class="form-title">
        Endereço da Empresa
      </p>
      
      <div class="mb-3">
        <label class="form-label">CEP*</label>
        <input type="text" formControlName="cep" (ngModelChange)="cepChange()" class="form-control">
        <div *ngIf="cep!.invalid && formDir.submitted" class="validation-error">
          Campo obrigatório.
        </div>
        <div *ngIf="cep!.errors?.pattern" class="validation-error">
          Valor inválido. Apenas números e hífen são aceitos nesse campo.
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Endereço*</label>
        <input type="text" formControlName="endereco" class="form-control">
        <div *ngIf="endereco!.invalid && formDir.submitted" class="validation-error">
          Campo obrigatório.
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Bairro*</label>
        <input type="text" formControlName="bairro" class="form-control">
        <div *ngIf="bairro!.invalid && formDir.submitted" class="validation-error">
          Campo obrigatório.
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Complemento</label>
        <input type="text" formControlName="complemento" class="form-control">
      </div>

      <div class="mb-3">
        <label class="form-label">Cidade*</label>
        <select formControlName="cidadeNome" class="form-select" style="font-size: 13px;">
          <option selected></option>
          <option *ngFor="let cidade of cidadesNome">{{cidade}}</option>
        </select>
        <div *ngIf="cidadeNome!.invalid && formDir.submitted" class="validation-error">
          Campo obrigatório.
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Estado*</label>
        <select formControlName="estadoNome" (ngModelChange)="estadoChange()" class="form-select" style="font-size: 13px;">
          <option selected></option>
          <option *ngFor="let estado of estadosNome">{{estado}}</option>
        </select>
        <div *ngIf="estadoNome!.invalid && formDir.submitted" class="validation-error">
          Campo obrigatório.
        </div>
      </div>

      <button data-bs-toggle="modal" data-bs-target="#exampleModal" style="float: right;" type="submit" class="btn d-flex align-items-center" id="btnEditar">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cursor-fill" viewBox="0 0 16 16">
          <path d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z"/>
        </svg>
        &nbsp;
        Enviar
      </button>

      <div *ngIf="formDir.valid" class="modal" tabindex="-1" id="exampleModal">
        <div class="modal-dialog">
          <div class="modal-content" style="align-items: center; padding: 60px;">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8b/Eo_circle_green_white_checkmark.svg/1200px-Eo_circle_green_white_checkmark.svg.png" alt="Green check mark" width="60" height="60">
            {{modalText}}
          </div>
        </div>
      </div>

    </div>
  </div>

</form>